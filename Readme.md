# LLMチャレンジ on Local Desktop

## 1. プロジェクト概要
このプロジェクトは、NVIDIA RTX 3060を搭載したローカルデスクトップ環境を活用し、大規模言語モデル (LLM) の実験、特にファインチューニングを行うことを目的としています。
個人の映画ブログ記事をデータセットとして用い、独自のスタイルや指定したフォーマットを反映した文章生成モデルの構築を目指します。

## 2. プロジェクトの目的
- ローカルGPU環境でのLLM開発ワークフローの確立
- 少量データからの効率的なファインチューニング手法の探求
- 指定したフォーマットと文体を模倣するLLMの実現可能性の検証
- 生成AIを活用したデータ前処理・整形プロセスの導入

## 3. 現在の進捗
- **環境構築完了**:
    - Windows 11 + WSL2 (Ubuntu 22.04)
    - NVIDIAドライバ、CUDA Toolkit、cuDNN
    - Python 3.10 (Miniconda + pyenv)
    - PyTorch (CUDA対応ビルド)
    - OpenAI API連携
- **GPU動作確認**: PyTorchがRTX 3060を正常に認識。
- **データ収集と前処理**:
    - 既存の映画ブログ記事 (`output.jsonl`) を収集。
    - PythonスクリプトとOpenAI APIを利用し、冗長性の排除、タイトルの整形、指定6部構成への再編などの前処理を実施 (`output_refined_by_ai.jsonl`)。
- **ファインチューニング**:
    - 整形済みデータセットを用いて、OpenAIの`gpt-3.5-turbo`モデルのファインチューニングを実行。
    - ファインチューニング済みモデルIDを取得 (`ft:gpt-3.5-turbo-0125:personal:movieblog:Bd9j2iHa` など)。
- **記事生成と評価**:
    - ファインチューニング済みモデルとベースモデルを使用して記事を生成。
    - 生成結果を比較し、ファインチューニングによるフォーマット追従性や情報網羅性の向上を確認。
- **バージョン管理**: GitおよびGitHubにて管理。

## 4. 主要なスクリプトと設定
- `src/config/settings.py`: APIキー、モデルID、生成パラメータなどの設定。
- `src/main.py`: 記事生成のメインスクリプト。ファインチューニング済みモデルとベースモデルの切り替えに対応。
- `scripts/refine_output_jsonl.py`: `output.jsonl` を整形し、ファインチューニング用データセットを生成するスクリプト。
- `data/finetuning_data/output_refined_by_ai.jsonl`: ファインチューニングに使用した学習データ。
- `data/generated_articles/`: 生成された記事の保存先。

## 5. 環境セットアップの主要手順 (備忘録)
1. WSL2 Ubuntu環境構築
2. NVIDIAドライバ (Windows側) の最新化
3. CUDA Toolkit for WSL のインストール
4. cuDNN のインストール
5. `pyenv` と `Miniconda` を用いたPython環境 (`llm_env`) の構築
6. `llm_env` 環境への主要Pythonライブラリ (PyTorch, OpenAI, tqdmなど) のインストール

## 6. 今後の予定
- **生成記事の質的向上**:
    - プロンプトエンジニアリングのさらなる工夫による表現力の向上。
    - ファインチューニングデータの質と量の見直し、追加学習の検討。
    - 生成後のテキストに対する後処理（Markdown装飾の追加など）の検討。
- **評価指標の導入**: 生成記事の品質を客観的に評価する指標の検討。
- **異なるベースモデルでの実験**: 他のLLMでのファインチューニング効果の比較。
- **UI/UXの検討**: より簡単に記事を生成・管理できるインターフェースの検討（オプション）。

## 7. リポジトリ構成
- `data/`:
    - `finetuning_data/`: ファインチューニング用データセット
    - `generated_articles/`: 生成された記事
    - (元ブログデータなど)
- `src/`:
    - `config/`: 設定ファイル
    - `generator/`: 記事生成関連モジュール
    - `main.py`: メイン実行スクリプト
    - (その他、前処理や評価用モジュール)
- `scripts/`: データ整形などのユーティリティスクリプト
- `models/`: (ローカルに保存する場合の)学習済みモデル保存用 (現在はOpenAIのモデルIDを使用)
- `notebooks/`: 実験用Jupyter Notebook
- `report/`: 作業レポートや分析結果 (Markdown形式など)
- `Readme.md`: 本ファイル